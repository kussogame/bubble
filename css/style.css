/* ============================
   Safe override for top-right buttons
   右端はみ出し対策（ノッチ端末でもOK）
   ============================ */

/* ステージ基準で位置決め（画面全体基準になるのを防ぐ）*/
.stage { position: relative; }

/* ---- Retry（右端に確実固定） ---- */
#btnRetry{
  position: absolute;                  /* 既に absolute/fixed でもOK */
  top: 8px;
  right: calc(env(safe-area-inset-right, 0px) + 8px); /* ノッチ保険 + 右マージン */
  left: auto !important;               /* left 指定が残っていても無効化 */
  transform: none !important;          /* translateX などのズレを無効化 */
  box-sizing: border-box;              /* クリック領域の計算を安定させる */
  max-width: calc(100% - 16px);        /* 万一の極端な縮小でもはみ出さない保険 */
}

/* ---- Pause（Retryの左に並べる：幅に応じて 72px を微調整可） ---- */
#btnPause{
  position: absolute;
  top: 8px;
  right: calc(env(safe-area-inset-right, 0px) + 8px + 72px);
  left: auto !important;
  transform: none !important;
  box-sizing: border-box;
}

/* ---- BGM スライダーのパネルが右配置を圧迫している場合の保険（任意） ----
   BGMパネルがある場合は左固定にして右を空ける。ID/クラス名が違う場合は調整してください。 */
#bgmPanel, .bgm-panel{
  position: absolute;
  top: 8px;
  left: 8px;
  right: auto !important;
  transform: none !important;
  box-sizing: border-box;
}

/* 画面が極端に狭い場合は、左右の余白を少し詰める（任意） */
@media (max-width: 360px){
  #btnRetry{ right: calc(env(safe-area-inset-right, 0px) + 6px); top: 6px; }
  #btnPause{ right: calc(env(safe-area-inset-right, 0px) + 6px + 64px); top: 6px; }
}
